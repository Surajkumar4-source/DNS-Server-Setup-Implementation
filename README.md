# DNS-Server-Setup-Implementation


---

## Step 1: Network Configuration

1. Open network configuration:

   ```bash
   nmtui
   ```

   Use the `nmtui` command to configure IP, Gateway, DNS, and hostname interactively.

2. Set the following details:

   - **IP Address:** Assign a static IP to the server.
   - **Gateway:** Use `route -n` to determine the gateway.
   - **Primary DNS:** Serverâ€™s own IP address.
   - **Secondary DNS:** `8.8.8.8` (Google's public DNS).
   - **DNS Search Domain:** Specify a domain name (e.g., `suraj.com`).
   - **Hostname:** Set a unique machine name.

3. Restart network services:

   ```bash
   systemctl restart network
   systemctl restart NetworkManager
   ```

   These commands ensure the updated network configuration is applied.

4. Enable the network interface:

   ```bash
   ip link set ens160 up
   ```

   Replace `ens160` with your network interface name.

---

## Step 2: Install BIND

Install BIND (Berkeley Internet Name Domain), the software for DNS services:

```bash
sudo dnf install bind bind-utils -y
```

- `bind-utils`: Includes useful DNS query utilities.
- `-y`: Automatically confirms the installation.

---

## Step 3: Configure BIND

Edit the primary configuration file:

```bash
vim /etc/named.conf
```

Modify the configuration:

```conf
options {
    listen-on port 53 { 192.168.82.212; };
    directory       "/var/named";
    allow-query     { any; };
    recursion yes;
    dnssec-validation yes;
    managed-keys-directory "/var/named/dynamic";
};

zone "suraj.com" IN {
    type master;
    file "for.suraj.com";
};

zone "82.168.192.in-addr.arpa" IN {
    type master;
    file "rev.suraj.com";
};
```

- `listen-on port 53`: Binds the DNS service to the specified IP.
- `allow-query { any; }`: Allows DNS queries from all clients.
- `zone`: Defines forward and reverse zones for DNS resolution.

Restart the service:

```bash
systemctl restart named
```

---

## Step 4: Create Zone Files

Navigate to the DNS directory:

```bash
cd /var/named
```

### Forward Zone File

1. Copy the default file:
   ```bash
   cp -av named.localhost for.suraj.com
   ```
2. Edit the forward zone file:
   ```bash
   vim for.suraj.com
   ```
   Content:
   ```conf
   $TTL 1D
   @       IN SOA   suraj.com.        root.suraj.com. (
                            0           ; serial
                            1D          ; refresh
                            1H          ; retry
                            1W          ; expire
                            3H )        ; minimum

           IN NS    master.suraj.com.

   suraj.com.        IN A     192.168.82.212
   master.suraj.com. IN A     192.168.82.212
   ```

### Reverse Zone File

1. Copy the default file:
   ```bash
   cp -av named.localhost rev.suraj.com
   ```

2. Edit the reverse zone file:
   ```bash
   vim rev.suraj.com
   ```
   Content:
   ```conf
   $TTL 1D
   @       IN SOA   suraj.com.        root.suraj.com. (
                            0           ; serial
                            1D          ; refresh
                            1H          ; retry
                            1W          ; expire
                            3H )        ; minimum

           IN NS    master.suraj.com.

   212     IN PTR   suraj.com.
   212     IN PTR   master.suraj.com.
   ```

---

## Step 5: Restart and Verify

1. Restart the DNS service:
   ```bash
   systemctl restart named
   ```

2. Verify DNS resolution:
   ```bash
   host suraj.com
   host master.suraj.com
   ```

---

## Troubleshooting

1. If hostname resolution fails, check the resolver configuration:
   ```bash
   cat /etc/resolv.conf
   ```
2. Ensure the file contains:
   ```
   # Generated by NetworkManager
   search suraj.com master.suraj.com
   nameserver 192.168.82.212
   nameserver 8.8.8.8
   ```
